<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Pedidos Frontend</title>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>

<body>
    <h1>Test de API de Pedidos</h1>
    <button onclick="testPedidos()">Probar API de Pedidos</button>
    <div id="result"></div>

    <script>
        const API_BASE = 'http://localhost:4000/api';

        async function testPedidos() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '<p>Probando API...</p>';

            try {
                console.log('üîç Iniciando test de API de pedidos...');

                // Test 1: Obtener todos los pedidos
                console.log('1Ô∏è‚É£ GET /api/pedidos');
                const response = await axios.get(`${API_BASE}/pedidos`);

                console.log('‚úÖ Respuesta exitosa:', response.status);
                console.log('üìä Datos recibidos:', response.data);
                console.log('üî¢ Cantidad de pedidos:', response.data.length);

                if (response.data.length > 0) {
                    const primerPedido = response.data[0];
                    console.log('üìã Primer pedido:', {
                        id: primerPedido.id_pedido,
                        estado: primerPedido.estado,
                        importe: primerPedido.importe,
                        fecha: primerPedido.fecha_pedido
                    });
                }

                resultDiv.innerHTML = `
                    <h3>‚úÖ Test Exitoso</h3>
                    <p><strong>Status:</strong> ${response.status}</p>
                    <p><strong>Pedidos encontrados:</strong> ${response.data.length}</p>
                    <pre>${JSON.stringify(response.data, null, 2)}</pre>
                `;

            } catch (error) {
                console.error('‚ùå Error en el test:', error);
                console.error('Detalles del error:', {
                    message: error.message,
                    status: error.response?.status,
                    data: error.response?.data
                });

                resultDiv.innerHTML = `
                    <h3>‚ùå Error en el Test</h3>
                    <p><strong>Mensaje:</strong> ${error.message}</p>
                    <p><strong>Status:</strong> ${error.response?.status || 'N/A'}</p>
                    <p><strong>Datos:</strong> ${JSON.stringify(error.response?.data || {}, null, 2)}</p>
                `;
            }
        }

        // Test autom√°tico al cargar la p√°gina
        window.onload = function () {
            console.log('üöÄ P√°gina cargada, iniciando test autom√°tico...');
            setTimeout(testPedidos, 1000);
        };
    </script>
</body>

</html>















